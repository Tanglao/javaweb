# mysql  InnoDB引擎

* 基于磁盘的数据库系统，将磁盘上的页读取到缓冲池中，通过内存的速度弥补磁盘较慢的数据。
* 有哪些数据在缓冲池？

  * 索引页、数据页、undo页、自适应哈希索引、锁、数据字典

* 缓冲池中的数据什么时候与磁盘同步？

  * 采用checkpoint技术。
  * 缓冲池不够用，刷新脏页
  * 重做日志不可用，刷新脏页

* 为什么重做日志会不可用？

  * 重做日志是为了确保数据持久化，不需要太多的空间

* 当缓冲池中的页写入磁盘时正好宕机了，怎么办？

  * 写入磁盘前先写入重做日志文件

* 重做日志怎么保证持久化

  * Master Thread每秒会将重做日志缓冲写入磁盘，并且以磁盘最小单位扇区512B 写入磁盘。

  * 通过参数控制重做日志刷回磁盘的时间：事务提交必须刷回重做日志

* InnoDB有哪些关键特性

  * 插入缓冲。需要满足索引是辅助索引（辅助索引是非聚集的，采用B+树结构，如果及时插入需要离散访问大量页）、索引不是唯一的（不需要判定唯一）

  * 双写。由于刷新页到磁盘会有部分失败，重做也无用。所以可以在写入前先从内存取出原来的页，当出现写入失效时可以通过副本重做，最后将内存中的页在顺序写入磁盘。

  * 自适应哈希索引。根据访问的频率和模式对热点页建立哈希索引

  * 异步IO。合并多次IO,如发现紧邻页，直接一次读写。

  * 刷新邻接页

* binlog是什么？

  * 记录整个数据的更改日志

  * 用于数据库恢复、备份、日志审计

* 事务隔离级别有哪些？

  * 读未提交、不可重复读、可以重复读、序列化

* 如果实现事务

  * 重做日志保持持久性、undo日志保证一致性

* mysql的索引是如何存储的
  * B+树结构（平衡查找树），所有记录在同一层叶子结点顺序存放，各个叶子结点用指针链接，高度一般为2-4层，一般2-4次IO就可以根据键值查找到记录



